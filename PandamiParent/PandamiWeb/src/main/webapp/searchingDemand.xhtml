<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="/masterPage.xhtml">
	<ui:define name="title">Recherche</ui:define>
	<ui:define name="content">
		<div id="main">
			<div>TITRE</div>
			<div id="centerPanel">
				<div id="leftPanel">
				<h:form>
					<div>
						<h5>Recherche : </h5>
					</div>
					<div>
						<label>Lieu</label>
						<p:inputText/>
					</div>
					<div>
						<label>Dates :</label>
             		   	<p:datePicker id="range" selectionMode="range" value="#{mbSearch.range}" readonlyInput="true"/>
					</div>
                	<div>
                		<label>de</label>
                		<p:datePicker value="#{mbSearch.beginTime}" timeInput="true"/>    
                		<label>à</label><br/>
                		<p:datePicker value="#{mbSearch.endTime}" timeInput="true"/>
                	</div>
                	<div>
               			<p:selectCheckboxMenu value="#{mbSearch.selectedActivities}" label="Activités" multiple="true" filter="false" filterMatchMode="startsWith" converter="omnifaces.SelectItemsConverter" scrollHeight="250">
            				<f:selectItems value="#{mbSearch.cBoxCategories}" var="activity" itemLabel="#{activity.label}" itemValue="#{activity}"/>
        				</p:selectCheckboxMenu>
                	</div>
                	<div>
                		<p:selectOneMenu value="#{mbSearch.selectedEquipment}" converter="omnifaces.SelectItemsConverter">
    						<f:selectItem itemValue="" itemLabel="Matériel"/>
    						<f:selectItems value="#{mbSearch.equipments}" var="equipment" itemLabel="#{equipment.label}" itemValue="#{equipment}"/>
    					</p:selectOneMenu>
                	</div>
                	<div>
                		<p:commandButton action="#" value="Rechercher" />
                	</div>				
				</h:form>
				</div>
				<div id="RightPanel">
					<h:form>
						<p:dataTable var="demand" value="#{mbSearch.demands}" widgetVar="demandTable" 
						emptyMessage="Aucune demande ne correspond à vos critères de recherche">
						
							<f:facet name="tableHeader">
								<span>Actions</span>
							</f:facet>
							
							<p:column headerText="Activité" sortBy="#{demand.activity.label}" filterBy="#{demand.activity.label}">
								<h:outputText value="#{demand.activity.label}"/>
							</p:column>

							<p:column headerText="Ville" sortBy="#{demand.city.name}" filterBy="#{demand.city.name}">
								<h:outputText value="#{demand.city.name}"/>
							</p:column>
							
							<p:column field="actionDate" headerText="Date d'action"  filterMatchMode="range">
								<f:facet name="filter">
                    				<p:datePicker selectionMode="range" onchange="PF('customersTable').filter()" />
                				</f:facet>
								<h:outputText value="#{demand.actionDate}"/>
							</p:column>

							<p:column headerText="Heure début" sortBy="#{demand.startHour}" filterBy="#{demand.startHour}">
								<p:datePicker value="#{demand.startHour}" TimeInput="true"/>
							</p:column>

							<p:column headerText="Heure fin" sortBy="#{demand.endHour}" filterBy="#{demand.endHour}">
								<p:datePicker value="#{demand.endHour}" TimeInput="true"/>
							</p:column>
							
							<p:column>
								<p:commandButton id="applyButton" onclick="#" icon="pi pi-check" value="Postuler"/>
            				</p:column>		
            			</p:dataTable>		
					</h:form>
				</div>
			</div>
		</div>
	</ui:define>
	<ui:define name="CSS">
		<h:outputStylesheet name="CSS/searchingDemand.css" />
	</ui:define>
</ui:composition>
</html>
